# CCA-3: Переменные #

***Издание: 15.09.2019***

***Подтверждено: ~~xx.xx.20xx~~***

## Назначение ##

Определение границ диапазонов переменных для различных задач.

Поскольку на языке Кадабры отсутствует поддержка локальных переменных ([см. определение](https://ru.wikipedia.org/wiki/Локальная_переменная)) и присутствуют лишь глобальные переменные ([см. определение](https://ru.wikipedia.org/wiki/Глобальная_переменная)) в ограниченном количестве вызывает ряд проблем.

Одна из основных - конфликтность использования переменных разных модулей или пользователя и модулей. То есть, предположим, пользователь хранит важную для него информацию в !x7-13 и хочет использовать модуль **"A"**, автор которого использует диапазон мощностей !х5-10. По итогу пользователю приходится переписывать заклинание под этот модуль, чтобы не терять важную для него информацию.

Но что если подобная ситуация возникает между модулями? Их перестраивание влечет за собой более серьезные трудности, нежели в прошлой ситуации.

Из этого имеем две проблемы:

* Пользователю приходится подстраивать свое заклинание под модули, когда они должны облегчать выполнение задач.

* Конфликтность модулей, что лишает их комбинированного использования.

Для предотвращения подобных ситуаций данное соглашение устанавливает четкие границы диапазонов для определенных задач, тем самым решая все выше описанные проблемы.

***

## Задачи ##

Известные на данный момент задачи возникающие в практике:

* [Расчет конечного результата модуля (module-range)](#Расчет-конечного-результата-модуля).

* [Хранение состояния модуля (state-range)](#Хранение-состояния-модуля).

* [Пользовательские задачи (user-range)](#Пользовательские-задачи).

* [Требования языка (lang-range)](#Требования-языка).

Под каждую задачу определен свой диапазон переменных в пункте ["Диапазоны"](#Диапазоны).

### **Расчет конечного результата модуля** ###

>Кодовое обозначение: module-range

Каждый модуль выполняет строго назначенную ему задачу, так или иначе нужная пользователю или просто облегчающая ему жизнь: что-то построить, определить, проинформировать или дать какой-либо ответ.

Последний вариант наиболее интересен. Такие модули обычно представляют собой подобную схему:

> Получение данных - обработать - дать ответ\\результат.

Обработка порой может быть сложной, и для ее выполнения могут понадобиться больше ресурсов - переменных.

Поскольку для такой ситуации могут понадобиться больше переменных, чем используемые в качестве параметров, она была выделена в разряд задач по использованию переменных.

Для это задачи диапазон составляет:

* Мощности: 13 - 30
* Сокращения: 13 - 30

### **Хранение состояния модуля** ###

>Кодовое обозначение: state-range

Порой модули могут быть много используемы, если выполняют часто встречаемые пользователю цели. Но может возникнуть потребность в переменной, в которой будет храниться важная для модуля информация, влияющая на его внешнее поведение и с учетом того, что модуль предназначен для многоразового использования.

В таком случае модулю необходимо какая-то переменная(ые) для хранения данных и впоследствии ее не терять после вызова модуля.

Такое положение введено в разряд задач по использованию переменных.

Поскольку в теории может возникнуть конфликт на основе использования одних и тех же переменных, при публикации своего модуля, автор должен опираться на список уже используемых переменных в этом диапазоне, если в его модуле стоит такая же задача. Их список приведен в [CCA-3-1](CCA-3-1.md)

Для это задачи диапазон составляет:

* Мощности: 31 - 60
* Сокращения: 31 - 60

### **Пользовательские задачи** ###

>Кодовое обозначение: user-range

Сам пользователь ставит перед собой задачу при написании заклинания. Спектр таких задач безусловно велик и для их выполнения выделен свой диапазон переменных.

Для это задачи диапазон составляет:

* Мощности: 3 - 12
* Сокращения: 1 - 12

### **Требования языка** ###

>Кодовое обозначение: lang-range

Для работы некоторых ключевых слов требуются строго определенные переменные. На данных момент это мощности первого и второго порядка.

Можно сказать их задача - выполнение работы ключевых слов языка, поэтому для них существует соответствующий диапазон:

* Мощности: 1 - 2

### **Дополнение** ###

>Кодовое обозначение: wasteland-range

Остается нетронутым диапазон переменных от 61 включительно как для мощностей, так и для сокращений из-за ее громоздкости использования.

Данный диапазон никем не регулируется, поэтому не рекомендуется его использовать.

***

## Диапазоны ##

|    Тип    |  lang     |  user     |  module   |  state    | wasteland |
|-----------|-----------|-----------|-----------|-----------|-----------|
| Мощность  |  1 - 2    |  2 - 12   |  12 - 30  |  31 - 60  | > 60      |
| Сокращение|           |  1 - 12   |  12 - 30  |  31 - 60  | > 60      |

***

## Приложение ##

* [CCA-3-1](CCA-3-1.md) - используемые переменные диапазона state.
